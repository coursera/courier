@args org.coursera.courier.py3.Py3Syntax.Py3RecordSyntax record
@import org.coursera.courier.py3.Py3Syntax.Py3UnionSyntax
@import org.coursera.courier.py3.Py3Syntax.Py3RecordFieldSyntax
@record.imports()

class @(record.typeName())(courier.Record):
    AVRO_SCHEMA = courier.parse_avro_schema(@record.avroSchemaJson())

    def __init__(self, data=None, @for(Py3RecordFieldSyntax field: record.fields()) {@field.accessorName()=@field.constructorDefault(), }):
        super(@record.typeName(), self).__init__(data)
        @if(!record.fields().isEmpty()){        if data is None:}
            @for(Py3RecordFieldSyntax field: record.fields()) {
            if @field.accessorName() is courier.REQUIRED:
                raise TypeError('__init__() missing required keyword argument: \'@field.accessorName()\'')
            elif @field.accessorName() not in [None, courier.OPTIONAL]:
                self.data['@field.jsonKey()'] = courier.data_value(@field.accessorName())
            }

        courier.validate(self)

    def __str__(self):
      return '@(record.typeName())(' + \
        @for(Py3RecordFieldSyntax field: record.fields()) {
          '@(field.accessorName())=' + str(self.@(field.accessorName())) + \
        }
      ')'

    def __repr__(self):
      return '@(record.typeName())(' + repr(self.data) + ')';

    def __eq__(self, other):
      return isinstance(other, @(record.typeName())) and self.data == other.data

@for(Py3RecordFieldSyntax field: record.fields()) {

    #
    # '@field.accessorName()' property
    #
    @{ String setter = field.accessorName() + ".setter" }
    @@property
    def @field.accessorName() (self):
        return self._get_data_field(data_key='@field.jsonKey()', type_constructor=@field.constructor())

    @@@setter
    def @field.accessorName() (self, new_value):
        return self._set_data_field('@field.jsonKey()', new_value)
}@if(record.requiresCompanionModule()) { @for(Py3UnionSyntax union: record.enclosedUnions()) {
     @union(union, 1)
  }
}
